(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4063],{13177:(e,t,s)=>{Promise.resolve().then(s.bind(s,29238))},25873:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=e=>{let{message:t="Loading...",fullScreen:s=!0}=e;return s?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center fixed inset-0 z-50",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-10 w-10 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("p",{className:"mt-2 text-lg font-medium text-gray-700",children:t})]}):(0,r.jsxs)("div",{className:"flex items-center justify-center py-2",children:[" ",(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-indigo-600 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:["  ",(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:t})," "]})}},29238:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I,dynamic:()=>R});var r=s(95155),a=s(12115),l=s(35695),i=s(83637),n=s(20480),o=s(25873),d=s(52596),c=s(39688);function m(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,d.$)(t))}let x=a.forwardRef((e,t)=>{let{className:s,variant:a="default",size:l="default",...i}=e;return(0,r.jsx)("button",{className:m("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground shadow hover:bg-primary/90":"default"===a,"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90":"destructive"===a,"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground":"outline"===a,"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80":"secondary"===a,"hover:bg-accent hover:text-accent-foreground":"ghost"===a,"text-primary underline-offset-4 hover:underline":"link"===a,"h-9 px-4 py-2":"default"===l,"h-8 rounded-md px-3 text-xs":"sm"===l,"h-10 rounded-md px-8":"lg"===l,"h-9 w-9":"icon"===l},s),ref:t,...i})});x.displayName="Button";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:m("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});u.displayName="Card";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:m("flex flex-col space-y-1.5 p-6",s),...a})});h.displayName="CardHeader";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:m("text-2xl font-semibold leading-none tracking-tight",s),...a})});p.displayName="CardTitle";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:m("text-sm text-muted-foreground",s),...a})});f.displayName="CardDescription";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:m("p-6 pt-0",s),...a})});g.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:m("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";let y=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:m("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});y.displayName="Input";let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:m("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});j.displayName="Textarea";let v=0,b=new Map,N=e=>{if(b.has(e))return;let t=setTimeout(()=>{b.delete(e),k({type:"REMOVE_TOAST",toastId:e})},1e6);b.set(e,t)},w=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?N(s):e.toasts.forEach(e=>{N(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},T=[],E={toasts:[]};function k(e){E=w(E,e),T.forEach(e=>{e(E)})}function S(e){let{...t}=e,s=(v=(v+1)%Number.MAX_VALUE).toString(),r=()=>k({type:"DISMISS_TOAST",toastId:s});return k({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>k({type:"UPDATE_TOAST",toast:{...e,id:s}})}}var C=s(2216);let _=(0,s(74466).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),A=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(C.b,{ref:t,className:m(_(),s),...a})});A.displayName=C.b.displayName;var O=s(83029),M=s(59432);let R="force-dynamic";function D(){let e=(0,l.useRouter)(),{toast:t}=function(){let[e,t]=a.useState(E);return a.useEffect(()=>(T.push(t),()=>{let e=T.indexOf(t);e>-1&&T.splice(e,1)}),[e]),{...e,toast:S,dismiss:e=>k({type:"DISMISS_TOAST",toastId:e})}}(),[s,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(!0),[v,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{m(!0);let e=await fetch("/api/push-logs/member/1186");if(!e.ok)throw Error("Failed to fetch notices. Status: ".concat(e.status," ").concat(e.statusText));let t=await e.json();console.log("[NOTICE PAGE] Fetched data length:",t.length),d(t)}catch(e){console.error("Error fetching notices:",e)}finally{m(!1)}})()},[]);let N=(0,a.useMemo)(()=>(console.log("[NOTICE PAGE] Sorting notices, length:",s.length),[...s].sort((e,t)=>new Date(t.plt_sdate).getTime()-new Date(e.plt_sdate).getTime())),[s]),w=(0,a.useMemo)(()=>(console.log("[NOTICE PAGE] Grouping notices, length:",N.length),N.reduce((e,t)=>{let s=t.plt_sdate.slice(0,10);return e[s]||(e[s]=[]),e[s].push(t),e},{})),[N]);console.log("[NOTICE PAGE] Render - loading:",c,"notices length:",s.length,"grouped keys:",Object.keys(w));let C=async()=>{if(window.confirm("정말 모든 알림을 삭제하시겠습니까?"))try{let e=await fetch("/api/push-logs/delete-all",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mt_idx:1186})});if(!e.ok)throw Error("Failed to delete notices");let t=await e.json();console.log(t.message),d([])}catch(e){console.error("Error deleting notices:",e)}},_=async s=>{s.preventDefault(),b(!0);try{let r=new FormData(s.currentTarget);if(!(await fetch("/api/notice",{method:"POST",body:r})).ok)throw Error("공지사항 등록에 실패했습니다.");t({title:"성공",description:"공지사항이 등록되었습니다."}),e.push("/notice/list")}catch(e){t({title:"오류",description:e instanceof Error?e.message:"알 수 없는 오류가 발생했습니다.",variant:"destructive"})}finally{b(!1)}};return c?(0,r.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,r.jsx)(o.A,{message:"알림을 불러오는 중입니다..."})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("header",{className:"bg-white shadow-sm fixed top-0 left-0 right-0 z-10",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center h-12 justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>e.back(),"aria-label":"뒤로 가기",className:"p-2 mr-2 -ml-2 rounded-md text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})})}),(0,r.jsx)("h1",{className:"text-lg font-medium text-gray-900 truncate",children:"앱 푸시 알림"})]}),(0,r.jsxs)("button",{onClick:C,className:"flex items-center text-xs text-gray-500 hover:text-red-600 hover:bg-red-50 px-2 py-1 rounded transition-colors","aria-label":"전체 삭제",disabled:0===s.length,children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"전체삭제"]})]})})}),(0,r.jsxs)("main",{className:"pt-12 pb-8",children:[(0,r.jsx)("div",{className:"px-4 pb-2",children:(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"푸시 알림 내역을 확인하세요."})}),(0,r.jsx)("div",{className:"px-2",children:0===s.length?(0,r.jsx)("div",{className:"text-center text-gray-400 py-16",children:"알림이 없습니다."}):(0,r.jsx)("div",{className:"space-y-8",children:Object.entries(w).map(e=>{let[t,s]=e;return(0,r.jsxs)("section",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"text-base font-bold text-indigo-600 mb-2 px-2",children:[(0,i.GP)(new Date(t),"yyyy.MM.dd (E)",{locale:n.ko}),t===(0,i.GP)(new Date,"yyyy-MM-dd")&&(0,r.jsx)("span",{className:"text-primary ml-2",children:"오늘의 알림"})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow px-3 py-4",children:(0,r.jsx)("div",{className:"space-y-3",children:s.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-start border-b last:border-b-0 border-gray-100 pb-3 last:pb-0",children:[(0,r.jsx)("div",{className:"text-2xl ml-2 mr-3 mt-1 select-none",children:(null==(t=e.plt_title.match(RegExp("\\p{Extended_Pictographic}","u")))?void 0:t[0])||"\uD83D\uDCE2"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("span",{className:"font-bold text-gray-900 text-sm leading-tight",children:e.plt_title.replace(RegExp("\\p{Extended_Pictographic}","u"),"").trim()})}),(0,r.jsx)("div",{className:"text-gray-700 text-sm whitespace-pre-line mt-0.5 leading-snug",children:e.plt_content}),(0,r.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:(0,i.GP)(new Date(e.plt_sdate),"a h:mm",{locale:n.ko})})]})]},e.plt_idx)})})})]},t)})})})]}),(0,r.jsx)("div",{className:"container mx-auto py-8",children:(0,r.jsxs)(u,{children:[(0,r.jsxs)(h,{children:[(0,r.jsx)(p,{children:"공지사항 작성"}),(0,r.jsx)(f,{children:"새로운 공지사항을 작성합니다."})]}),(0,r.jsxs)(g,{children:[(0,r.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(A,{htmlFor:"title",children:"제목"}),(0,r.jsx)(y,{id:"title",name:"title",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(A,{htmlFor:"content",children:"내용"}),(0,r.jsx)(j,{id:"content",name:"content",required:!0,className:"min-h-[200px]"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)(x,{type:"button",variant:"outline",onClick:()=>e.back(),disabled:v,children:"취소"}),(0,r.jsx)(x,{type:"submit",disabled:v,children:v?"등록 중...":"등록"})]})]}),(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-background px-2 text-muted-foreground",children:"또는"})})]}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,r.jsxs)(x,{variant:"outline",className:"w-full",onClick:()=>{console.log("Google login clicked")},children:[(0,r.jsx)(O.F4b,{className:"mr-2 h-5 w-5"}),"구글로 가입"]}),(0,r.jsxs)(x,{variant:"outline",className:"w-full",onClick:()=>{console.log("Kakao login clicked")},children:[(0,r.jsx)(M.q2f,{className:"mr-2 h-5 w-5 text-yellow-400"}),"카카오로 가입"]})]})]})]})]})})]})}function I(){return(0,r.jsx)(D,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7753,2362,2156,9355,8441,1684,7358],()=>t(13177)),_N_E=e.O()}]);