# 📱 iOS 푸시 수신 문제 해결 체크리스트

## ⚠️ **긴급 확인사항**

### **1. iOS 기기 상태 확인**
```
📱 설정 > 알림 > SMAP
   ✅ 알림 허용: ON
   ✅ 잠금 화면: ON  
   ✅ 알림 센터: ON
   ✅ 배너: ON
   ✅ 소리: ON
```

### **2. iOS 시스템 설정**
```
📱 설정 > 일반 > 백그라운드 앱 새로고침
   ✅ SMAP: ON
   
📱 설정 > 배터리 > 저전력 모드
   ❌ 저전력 모드: OFF (비활성화)
   
📱 설정 > 집중 모드
   ✅ 방해금지 OFF 또는 SMAP 허용
```

### **3. 앱 상태 확인**
```
📱 SMAP 앱 완전 종료 → 재시작
📱 로그인 상태 확인
📱 푸시 권한 재확인
```

---

## 🔧 **해결된 기술적 문제들**

### **✅ 백그라운드 작업 시간 초과 수정**
- **문제**: 30초 이상 백그라운드 작업으로 iOS 강제 종료
- **해결**: 25초 자동 종료로 안전하게 수정

### **✅ 토큰 동기화 완료**  
- **이전**: `dILYElTo7UcIhJASJm6VUg` (구 토큰)
- **현재**: `fbZh4Rozjky1h6ng6RzF` (최신 토큰)

### **✅ FCM 모니터링 최적화**
- **빈도**: 30초 → 5분으로 조정
- **백그라운드**: 모니터링 비활성화

---

## 🎯 **테스트 방법**

### **1. 포그라운드 테스트**
```bash
# 앱을 포그라운드에 둔 상태에서
./fcm_test.sh
```

### **2. 백그라운드 테스트**  
```bash
# 앱을 백그라운드로 보낸 후
./fcm_test.sh
```

### **3. 앱 종료 상태 테스트**
```bash
# 앱을 완전 종료한 후
./fcm_test.sh
```

---

## 📊 **예상 결과**

### **✅ 정상 수신되는 경우**
- 알림 센터에 푸시 표시
- 알림음/진동 재생
- 배지 카운트 증가

### **❌ 수신 안되는 경우 추가 확인**
1. **네트워크 연결 확인**
2. **Apple 푸시 서버 상태 확인**
3. **iOS 버전 호환성**
4. **Firebase 프로젝트 설정**

---

## 🚨 **즉시 시도해볼 것**

1. **iOS 기기에서 SMAP 앱 완전 종료**
2. **앱 재시작 후 로그인**  
3. **터미널에서 `./fcm_test.sh` 재실행**
4. **iOS 알림 센터 확인**

푸시가 정상 수신되면 ✅ 완료!
여전히 안 되면 위 체크리스트 확인 필요.
